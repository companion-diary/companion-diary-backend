const mysql = require('mysql2/promise');

// 이메일로 회원 ID 조회
async function selectUserIdWhereEmail(connection, user_email) {
  const query = mysql.format(`SELECT user_id FROM COMPAION_DIARY_DB.user WHERE user_email=?;`, [user_email]);
  const Rows = await connection.query(query);

  return Rows[0];
}

// 회원 가입
async function insertIntoUser(connection, user_email, user_nickname, user_profile_img) {
  const query = mysql.format(`INSERT INTO COMPAION_DIARY_DB.user(user_email, user_nickname, user_profile_img) VALUES(?, ?, ?);`, [user_email, user_nickname, user_profile_img]);
  const Rows = await connection.query(query);

  return Rows[0];
}

// 사용자 other 동식물 추가
async function insertIntoOtherPet(connection, user_id) {
  const animal_profile_img = "data:image/png;base64,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";
  const plant_profile_img = "data:image/png;base64,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";

  const query = mysql.format(`INSERT INTO COMPAION_DIARY_DB.pet(user_id, pet_tag, pet_name, pet_age, pet_species, pet_sex, pet_profile_img)
   VALUES (?, "ANIMAL", "OTHER", 0, "OTHER", "OTHER", ?),
    (?, "PLANT", "OTHER", 0, "OTHER", "OTHER", ?);`,
     [user_id, animal_profile_img, user_id, plant_profile_img]);
  const Rows = await connection.query(query);

  return Rows[0];
}


module.exports = {
  selectUserIdWhereEmail,
  insertIntoUser,
  insertIntoOtherPet,
};
